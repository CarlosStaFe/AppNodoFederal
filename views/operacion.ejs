
    <%- include('partials/_head'); %>

    <link href="/css/createcliente.css" rel="stylesheet">
    <link href="/img/ICONO_LF.ico" rel="icon">
</head>

<body>

    <header>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <img class="mb-1 rounded" src="/img/NF-LOGO.jpeg" alt="" width="200" height="75">

    <%- include('partials/_header'); %>

    <main>
        <div class="container">
            <form class="row g-3 col-lg-12 shadow p-1 needs-validation text-primary" novalidate action="/createcliente" method="POST">
                <div class="bg-primary text-white p-1 text-center">
                    <h3>Ingresar Operación</h3>
                </div>
                <div class="col-lg-1 col-md-4 position-relative">
                    <label for="tipodoc" class="form-label">Tipo Doc.</label>
                    <select id="tipodoc" name="tipodoc" class="form-select" required>
                        <option selected disabled>Tipo</option>
                        <option value="DNI">DNI</option>
                        <option value="LC">LC</option>
                        <option value="LE">LE</option>
                        <option value="CI">CI</option>
                        <option value="PAS">PAS</option>
                    </select>
                    <div class="invalid-tooltip">Debe ingresar un tipo de documento</div>
                </div>
                <div class="col-lg-2 col-md-4 position-relative">
                    <label for="documento" class="form-label">Documento</label>
                    <input id="documento" name="documento" type="text" class="form-control" placeholder="Documento" required>
                    <div class="invalid-tooltip">Debe ingresar un documento</div>
                </div>
                <div class="col-lg-4 col-md-12 position-relative">
                    <label for="apelnombre" class="form-label">Apellido y Nombres</label>
                    <input id="apelnombre" name="apelnombre" type="text" class="form-control" disabled required>
                </div>
                <div class="col-lg-2 col-md-4 position-relative">
                    <label for="fechanac" class="form-label">Fecha Nac.</label>
                    <input id="fechanac" name="fechanac" type="date" class="form-control" disabled required>
                </div>
                <div class="col-lg-1 col-md-4 position-relative">
                    <label for="sexo" class="form-label">Sexo</label>
                    <input id="sexo" name="sexo" type="text" class="form-control" disabled required>
                </div>
                <div class="col-lg-2 col-md-4 position-relative">
                    <label for="cuil" class="form-label">C.U.I.L.</label>
                    <input id="cuil" name="cuil" type="text" class="form-control" disabled>
                </div>
                <div class="col-lg-3 col-md-6 position-relative">
                    <label for="estado" class="form-label">Estado</label>
                    <input id="estado" name="estado" type="text" class="form-control" disabled required>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                    <label for="fechaest" class="form-label">Fecha Estado</label>
                    <input id="fechaest" name="fechaest" class="form-control" type="date" disabled required>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                    <label for="socio" class="form-label">Socio</label>
                    <input id="socio" name="socio" class="form-control" type="text" required>
                </div>
                <div class="col-lg-5 col-md-12 position-relative">
                    <label for="nombresoc" class="form-label">Nombre Socio</label>
                    <input id="nombresoc" name="nombresoc" class="form-control" type="text" disabled required>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                    <label for="valor" class="form-label">Valor Cuota</label>
                    <input id="valor" name="valor" class="form-control" type="number" placeholder="0.00" step="0.01" required>
                </div>
                <div class="col-lg-1 col-md-12 position-relative">
                    <label for="cuotas" class="form-label">Cantidad</label>
                    <input id="cuotas" name="cuotas" class="form-control" type="number" placeholder="1" step="1" required>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                    <label for="total" class="form-label">Total Operación</label>
                    <input id="total" name="total" class="form-control" type="number" disabled required>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                    <label for="fecha1" class="form-label">Vto. 1er. Cuota</label>
                    <input id="fecha1" name="fecha1" class="form-control" type="date" required>
                    <div class="invalid-tooltip">Debe ingresar fecha de la primer cuota</div>
                </div>
                <div class="col-lg-3 col-md-12 position-relative">
                    <label for="tipo" class="form-label">Tipo Operación</label>
                    <select id="tipo" name="tipo" class="form-select" required>
                        <option value="">Seleccione Operación</option>
                        <option value="COMERCIAL">COMERCIAL</option>
                        <option value="INMOBILIARIO">INMOBILIARIO</option>
                        <option value="LEGAL">LEGAL</option>
                    </select>
                    <div class="invalid-tooltip">Debe ingresar el tipo de documento a consultar</div>
                </div>
                <div class="col-lg-2 col-md-12 position-relative">
                </div>
                <div class="col-lg-1 col-md-4 position-relative">
                    <label for="tipodocgar" class="form-label">Tipo Doc.</label>
                    <select id="tipodocgar" name="tipodocgar" class="form-select" required>
                        <option selected disabled>Tipo</option>
                        <option value="DNI">DNI</option>
                        <option value="LC">LC</option>
                        <option value="LE">LE</option>
                        <option value="CI">CI</option>
                        <option value="PAS">PAS</option>
                    </select>
                    <div class="invalid-tooltip">Debe ingresar un tipo de documento</div>
                </div>
                <div class="col-lg-2 col-md-4 position-relative">
                    <label for="nrodocgar" class="form-label">Documento</label>
                    <input id="nrodocgar" name="nrodocgar" type="text" class="form-control" placeholder="Documento" required>
                    <div class="invalid-tooltip">Debe ingresar un documento</div>
                </div>
                <div class="col-lg-4 col-md-12 position-relative">
                    <label for="apelnomgar" class="form-label">Apellido y Nombres</label>
                    <input id="apelnomgar" name="apelnomgar" type="text" class="form-control" required>
                </div>
                <div class="col-lg-4 p-4 col-md-12">
                    <button type="button" class="btn btn-success btn-sm" id="agregarGarante">Agregar Garante</button>
                </div>
                <div class="col-lg-12 mt-4">
                    <h5 class="text-primary">Lista de Garantes</h5>
                    <table class="table table-bordered table-striped">
                        <thead class="table-primary text-center">
                            <tr>
                                <th>#</th>
                                <th>Tipo Doc.</th>
                                <th>Documento</th>
                                <th>Apellido y Nombres</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="tablaGarantes">
                            <!-- Las filas se agregarán dinámicamente aquí -->
                        </tbody>
                    </table>
                    <!-- <button type="button" class="btn btn-success btn-sm" id="agregarGarante">Agregar Garante</button> -->
                </div>
                
                <div class="bg-transparent borde-primary">
                    <button type="submit" class="btn btn-primary">Registrar</button>
                    <a href="/" type="button" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>    
    </main>

    <%- include('partials/_footer'); %>

    <script>
        // Referencias a los elementos del formulario
        const tipoDocInput = document.getElementById('tipodocgar');
        const nroDocInput = document.getElementById('nrodocgar');
        const apeNomInput = document.getElementById('apelnomgar');
        const tablaGarantes = document.getElementById('tablaGarantes');
        const agregarGaranteBtn = document.getElementById('agregarGarante');
    
        // Contador para las filas
        let contadorGarantes = 0;
    
        // Función para agregar un garante a la tabla
        agregarGaranteBtn.addEventListener('click', () => {
            const tipoDoc = tipoDocInput.value;
            const nroDoc = nroDocInput.value;
            const apeNom = apeNomInput.value;
    
            // Validar que los campos no estén vacíos
            if (!tipoDoc || !nroDoc || !apeNom) {
                alert('Por favor, complete todos los campos antes de agregar un garante.');
                return;
            }
    
            // Incrementar el contador
            contadorGarantes++;
    
            // Crear una nueva fila
            const fila = document.createElement('tr');
            fila.innerHTML = `
                <td>${contadorGarantes}</td>
                <td>${tipoDoc}</td>
                <td>${nroDoc}</td>
                <td>${apeNom}</td>
                <td class="text-center">
                    <button type="button" class="btn btn-info btn-sm editarGarante">Editar</button>
                    <button type="button" class="btn btn-danger btn-sm eliminarGarante">Eliminar</button>
                </td>
            `;
    
            // Agregar la fila a la tabla
            tablaGarantes.appendChild(fila);
    
            // Limpiar los campos del formulario
            tipoDocInput.value = '';
            nroDocInput.value = '';
            apeNomInput.value = '';
    
            // Agregar funcionalidad al botón "Eliminar"
            fila.querySelector('.eliminarGarante').addEventListener('click', () => {
                fila.remove();
                actualizarNumeracion();
            });
    
            // Agregar funcionalidad al botón "Editar" (opcional)
            fila.querySelector('.editarGarante').addEventListener('click', () => {
                tipoDocInput.value = tipoDoc;
                nroDocInput.value = nroDoc;
                apeNomInput.value = apeNom;
                fila.remove();
                actualizarNumeracion();
            });
        });
    
        // Función para actualizar la numeración de las filas
        function actualizarNumeracion() {
            const filas = tablaGarantes.querySelectorAll('tr');
            contadorGarantes = 0;
            filas.forEach((fila, index) => {
                fila.children[0].textContent = index + 1;
                contadorGarantes++;
            });
        }
    </script>

</body>

</html>